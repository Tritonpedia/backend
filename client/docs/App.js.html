<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import createPageOrg from './homeComponents/createPageOrg';
import createPageClass from './homeComponents/createPageClass';
import createPageSection from './homeComponents/createPageSection';
import successPage from './homeComponents/successPage';
import TopBar from './topBarComponents/TopBar'
import Navbar from './navbar/Navbar';
import home from './homeComponents/home'
import CourseArticle, { BlankCourse } from './article/CourseArticle';
import OrgArticle, { BlankOrg } from './article/OrgArticle';
import {
  BrowserRouter as Router,
  Switch,
  Route
} from 'react-router-dom';



import './App.css';
import UserProfile from './userProfile/UserProfile';
import SectionArticle from './article/SectionArticle';
import { UserContext } from './contexts/UserContext';
import { useContext, useEffect } from 'react';

const REACT_APP_BACKEND_URL = process.env.REACT_APP_BACKEND_URL; 
const getProfileUrl = `${REACT_APP_BACKEND_URL}/users/profile`;

/**
 * Root level App component
 */
function App() {

  const { setUser } = useContext(UserContext);

  useEffect(() => {
    async function loginUser() {
      let currentSession = JSON.parse(localStorage.getItem('currentSession'));
      console.log(currentSession)
      if (currentSession) {
        fetch(`${getProfileUrl}`, {
          method: 'GET',
          headers: {
            'auth_token': currentSession.token 
          }
        })
        .then(() => (
          setUser(currentSession)
        ))
        .catch(error => {
          console.log(error)
        })
      } 
    }
    loginUser();
  }, [setUser])

  return (
    &lt;div>
      &lt;Router>
        &lt;TopBar />
        &lt;div className="main-container">
          &lt;Navbar />
          &lt;div className="page-container">
            &lt;Switch>
              &lt;Route exact path='/' component={home} />
              &lt;Route exact path='/createPageClass' component={createPageClass} />
              &lt;Route exact path='/createPageSection' component={createPageSection} />
              &lt;Route exact path='/createPageOrg' component={createPageOrg} />
              &lt;Route exact path='/successPage' component={successPage} />
              &lt;Route exact path='/userProfile' component={UserProfile} />
              &lt;Route exact path='/courses' component={BlankCourse} />
              &lt;Route exact
                path={`/courses/:dep/:courseName`}
                component={CourseArticle}>
              &lt;/Route>
              &lt;Route exact
                path={`/courses/:dep/:courseName/:quarter/:year/:sectionLetter`}
                component={SectionArticle}>
              &lt;/Route>
              &lt;Route exact path={`/orgs`} component={BlankOrg} />
              &lt;Route exact
                path={`/orgs/:orgName`}
                component={OrgArticle}>
              &lt;/Route>
            &lt;/Switch>
          &lt;/div>
          &lt;/div>
        &lt;/Router>
    &lt;/div>
  );
}

export default App;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#CourseArticle">CourseArticle</a></li><li><a href="global.html#LinkEntry">LinkEntry</a></li><li><a href="global.html#LinksPanel">LinksPanel</a></li><li><a href="global.html#OrgArticle">OrgArticle</a></li><li><a href="global.html#PathItem">PathItem</a></li><li><a href="global.html#querySearch">querySearch</a></li><li><a href="global.html#SectionArticle">SectionArticle</a></li><li><a href="global.html#SectionContent">SectionContent</a></li><li><a href="global.html#updateSelectedArticleType">updateSelectedArticleType</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sat Dec 18 2021 23:27:10 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
